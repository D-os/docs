<HTML><HEAD><TITLE>Screen Saver: Screen Saver Add-ons</TITLE></HEAD><BODY BGCOLOR=#ffffff>


<!--TOP LINKS-->
<HR>
<center>
<TABLE bgcolor=ddeeee>
<TR><TD>
<A HREF="index.html"><FONT face=HELVETICA>Screen Saver Table of Contents</FONT></A>&nbsp;&nbsp;
<TD>
&nbsp;&nbsp;<A HREF="Screen%20Saver%20Master%20Index.html"><FONT face=HELVETICA>Screen Saver Index</FONT></A>
</TABLE></center>
<!--TOP LINKS-->


<HR>
<H1>
<A NAME="Screen%20Saver%20Add-ons"></A>Screen Saver Add-ons
</H1>
<P>
Declared in:  <A HREF="/boot/develop/headers/be/add-ons/screen_saver/ScreenSaver.h">be/add-ons/screen_saver/ScreenSaver.h</A>
<P>
Library:  ScreenSaver
<P>
A screen saver add-on embodies a single screen saver module.  Each module is represented by a <A HREF="ScreenSaverClass.html#BScreenSaver">BScreenSaver</A> object.  To create this object, the add-on implements and exports the function <B><TT><A HREF="#instantiate_screen_saver()">instantiate_screen_saver()</A></TT></B>.  The screen saver system calls the <B><TT><A HREF="#instantiate_screen_saver()">instantiate_screen_saver()</A></TT></B> function when it's time to create and run the add-on's screen saver module.
<P>
<A NAME="12512:%20head1:%20Building%20and%20Installing%20your%20Add-on"></A>
<P>
<HR>
<H2>
<A NAME="Building%20and%20Installing%20your%20Add-on"></A><FONT SIZE=6>B</FONT>uilding and <FONT SIZE=6>I</FONT>nstalling your <FONT SIZE=6>A</FONT>dd-on
</H2>
<P>
When you build your add-on, you need to link against the <B>ScreenSaver</B> preferences application.  To do this you...
<P>
<UL>
<LI>Make a symbolic link to the <B>ScreenSaver</B> prefs in your add-on&gt;s source directory, and then rename the link to "<B>_APP_"</B>.  
<P>
<LI>Add <B>_APP_</B> to the libraries in your BeIDE project file or <B>Makefile</B>.
<P>
</UL>
<P>
You install your screen saver add-ons in the <B>Screen&nbsp;Savers</B> directory in <B><TT>B_USER_ADDONS_DIRECTORY</TT></B>; you may need to create the <B>Screen&nbsp;Savers</B> directory first.  (See <B><TT><A HREF="../The%20Storage%20Kit/Directory.html#find_directory()">find_directory()</A></TT></B> in the Storage Kit if you're not familiar with the <B><TT>B_USER_ADDONS_DIRECTORY</TT></B> constant.)
<P>
There's also a <B>Screen Savers</B> directory in <B><TT>B_BEOS_ADDONS_DIRECTORY</TT></B>.  This is reserved for screen savers that come with BeOS.  Don't put your screen savers in this directory.  
<P>
<HR>
<H2>
<A NAME="Global%20Functions"></A><FONT SIZE=6>G</FONT>lobal <FONT SIZE=6>F</FONT>unctions
</H2>
<P>
<HR>
<H3>
<A NAME="instantiate_screen_saver()"></A>instantiate_screen_saver()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
<A HREF="ScreenSaverClass.html#BScreenSaver">BScreenSaver</A> *<B><TT>instantiate_screen_saver(</TT></B><A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> *<I><FONT  color=991122 face=HELVETICA>msg</I></FONT>, image_id <I><FONT  color=991122 face=HELVETICA>image</I><B><TT><A HREF="../The%20Midi%20Kit/Midi.html#TempoChange(),SprayTempoChange()">)</A>
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
<B><TT><A HREF="#instantiate_screen_saver()">instantiate_screen_saver()</A></TT></B> must be implemented to create an instance of your BScreenSaver-derived class and return it as a <A HREF="ScreenSaverClass.html#BScreenSaver">BScreenSaver</A> pointer.  <I><FONT  color=991122 face=HELVETICA>msg</I></FONT> contains the state provided by a previous saver run (via the <B><TT><A HREF="ScreenSaverClass.html#SaveState()">SaveState()</A></TT></B> function).  <I><FONT  color=991122 face=HELVETICA>image</I></FONT> is the <B><TT>image_id</TT></B> of the add-on.  You usually just pass these arguments straight into your <A HREF="ScreenSaverClass.html#BScreenSaver">BScreenSaver</A> subclass' constructor, like this:
<P>
<PRE>&nbsp;&nbsp;&nbsp;#include &lt;add-ons/screen_saver/ScreenSaver.h>
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;class SpiffySaver : public BScreenSaver
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;public:
&nbsp;&nbsp;&nbsp;    SpiffySaver( BMessage *msg, image_id image );
&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;};
&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;BScreenSaver *instantiate_screen_saver(BMessage *msg, image_id image)
&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;    return new SpiffySaver(msg, id);
&nbsp;&nbsp;&nbsp;}</PRE>
<P>
The screen saver system handles bad object allocations for you.  This means you don't have to catch <B><TT>bad_alloc</TT></B> exceptions in your own code.  (If the system is that low on resources, the user has other things to worry about.)
<P>
</PRE></TABLE></UL></MENU></B></I></TT>



<!--TOP LINKS-->
<HR>
<center>
<TABLE bgcolor=ddeeee>
<TR><TD>
<A HREF="index.html"><FONT face=HELVETICA>Screen Saver Table of Contents</FONT></A>&nbsp;&nbsp;
<TD>
&nbsp;&nbsp;<A HREF="Screen%20Saver%20Master%20Index.html"><FONT face=HELVETICA>Screen Saver Index</FONT></A>
</TABLE></center>
<!--TOP LINKS-->


<!-- Footer for Release 5 HTML Be Book -->
<hr>
<br>
<p>
<center>
<i><FONT size=6>T</FONT>he <FONT size=6 color=blue>B</FONT><FONT size=6 color=red>e</font> <FONT size=6>B</FONT>ook</i>,
<br>...in lovely HTML...
<br>for BeOS Release 5.
<center>
<br>
<p><font face=helvetiva>Copyright &copy; 2000 Be, Inc.  All rights reserved..
</body>
</html>

