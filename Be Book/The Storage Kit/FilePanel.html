<HTML><HEAD><TITLE>The Storage Kit: BFilePanel</TITLE></HEAD><BODY BGCOLOR=#ffffff>


<!--TOP LINKS-->
<HR>
<center>
<TABLE bgcolor=ddeeee>
<TR><TD>
<A HREF="index.html"><FONT face=HELVETICA>The Storage Kit Table of Contents</FONT></A>&nbsp;&nbsp;
<TD>
&nbsp;&nbsp;<A HREF="The%20Storage%20Kit%20Master%20Index.html"><FONT face=HELVETICA>The Storage Kit Index</FONT></A>
</TABLE></center>
<!--TOP LINKS-->


<HR>
<H1>
<A NAME="BFilePanel"></A>BFilePanel
</H1>
<P>
Derived from:  none
<P>
Declared in:  <A HREF="/boot/develop/headers/be/storage/FilePanel.h">be/storage/FilePanel.h</A>
<P>
Library:  libtracker.so
<P>
<H6><A HREF="FilePanel.summary.html"><i>Summary</i></A></H6>
<P>
BFilePanel knows how to create and display an "Open File" or "Save File" panel, and provides the means for filtering and responding to the user's actions on the panel.  The Save Panel looks like this:
<P>
<IMG SRC="art/FilePanel1.GIF" ALIGN="bottom">
<P>
The Open Panel looks pretty much the same, but without the text view in the lower left corner.
<P>
<HR>
<H3>
<A NAME="Creating%20and%20Using%20a%20BFilePanel"></A>Creating and Using a BFilePanel
</H3>
<P>
To create and use a <A HREF="#BFilePanel">BFilePanel</A>, follow these steps:
<P>
<B>1. </B>&nbsp;&nbsp;&nbsp;<B>Construct a BFilePanel object</B> in response to the user's request (most likely, a click on an "Open" or "Save"/"Save As" menu item).  When you construct the panel, you have to specify its "mode" (Open or Save).  
<P>
<B>2. </B>&nbsp;&nbsp;&nbsp;<B>Fine-tune the panel</B> by telling it which directory to display, whether it allows multiple selection, whether it can open a directory, which target it should send notifications to, and so on.  (Most of these parameters can also be set in the constructor.) 
<P>
<B>3. </B>&nbsp;&nbsp;&nbsp;<B>Invoke <TT><A HREF="#Show()">Show()</A> on the panel,</TT></B> and then wait for the user to confirm a selection (or close the panel).
<P>
<B>4. </B>&nbsp;&nbsp;&nbsp;<B>Receive a message</B>.  When the user confirms a selection (or cancels the panel), the panel disappears and a notification message (Open, Save, or Cancel) is sent to the panel's target.  The message identifies the confirmed file(s).
<P>
<B>5. </B>&nbsp;&nbsp;&nbsp;<B>Delete the BFilePanel object...or don't</B>.  When the user closes a file panel, the object is not automatically deleted; you have to do it yourself.  But you may not want to.  If you don't delete the panel, you can simply call <B><TT><A HREF="#Show()">Show()</A></TT></B> the next time you want to display it; the state from the previous invocation (the panel's size and location, the directory it points to) is remembered.
<P>
<A NAME="38200:%20head2:%20Constructing%20and%20Fine-tuning%20the%20Panel"></A>
<P>
<HR>
<H3>
<A NAME="Constructing%20and%20Fine-tuning%20the%20Panel"></A>Constructing and Fine-tuning the Panel
</H3>
<P>
The BFilePanel constructor has about two thousand arguments.  They all have default values, and most of the parameters that they control can be set through individual functions.  The following sections list and describe the constructor arguments and tell you if there's an analogous function.
<P>
<B><H4>
<A NAME="Panel%20Mode"></A>Panel Mode
</H4>
<P>
<TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT>file_panel_mode</TT></B> <I><FONT  color=991122 face=HELVETICA>mode</I></FONT></TD>
<TD><B><TT>B_OPEN_PANEL</TT></B></TD>
<TD>none</TD>
</TABLE>
<P>
There are two file panel modes:  <B><TT>B_OPEN_PANEL</TT></B> and <B><TT>B_SAVE_PANEL</TT></B>.  You've got to make up your mind in the constructor.  
<P>
<B><H4>
<A NAME="Target"></A>Target
</H4>
<P>
<TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A></TT></B> *<I><FONT  color=991122 face=HELVETICA>target</I></FONT></TD>
<TD><B><TT><A HREF="../The%20Application%20Kit/Application.html#be_app_messenger">be_app_messenger</A></TT></B></TD>
<TD><B><TT><A HREF="#SetTarget()">SetTarget()</A></TD>
</TABLE></TT></B>
<P>
The target represents the BLooper/BHandler that will receive the Open, Save, and Cancel messages.
<P>
<B><H4>
<A NAME="Panel%20Directory"></A>Panel Directory
</H4>
<P>
<TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="misc.html#entry_ref">entry_ref</A></TT></B> *<I><FONT  color=991122 face=HELVETICA>panel_directory</I></FONT></TD>
<TD>cwd</TD>
<TD><B><TT><A HREF="#SetPanelDirectory()">SetPanelDirectory()</A></TD>
</TABLE></TT></B>
<P>
When a panel is first displayed, it has to show the contents of some directory; this is called the "panel directory."  The panel directory defaults to the current working directory.
<P>
<B><H4>
<A NAME="Confirmable%20Node%20Flavors"></A>Confirmable Node Flavors
</H4>
<P>
<TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../The%20Support%20Kit/misc.html#Integer%20Types">uint32</A></TT></B> <I><FONT  color=991122 face=HELVETICA>node_flavors</I></FONT></TD>
<TD><B><TT>B_FILE_NODE</TT></B></TD>
<TD>none</TD>
</TABLE>
<P>
<TABLE  CELLPADDING=4>
	<TR>
		<TD>&nbsp;
		<TD>
			<HR NOSHADE>
			<TABLE CELLPADDING=4>
				<TR>
					<TD VALIGN=TOP>
						<IMG SRC="../art/infoBullet.gif">
					<TD><FONT FACE="helvetica">
This parameter applies to Open panels only.
<P>
						</FONT>			
			</TABLE>
			<HR NOSHADE>
</TABLE>

<P>
There are three node flavors:  <B><TT>B_FILE_NODE</TT></B>, <B><TT>B_DIRECTORY_NODE</TT></B>, and <B><TT>B_SYMLINK_NODE</TT></B>.  You combine these constants to declare the flavors that you want the user to be able to confirm.  Before describing the flavor settings, keep this in mind...
<P>
<UL>
<LI><B>Double-clicking a directory in the file list always enters the directory, regardless of the panel's flavor setting.
<P>
</B></UL>
<P>
If you understand the following, you can save yourself some reading:
<P>
<UL>
<LI>If your app wants to open files only, then stick with the default (<B><TT>B_FILE_NODE</TT></B>); the user will be able to confirm files and symlinks to files.  If you want directories as well (for example, a compression app might want to work on files <I>and</I> directories) then add in <B><TT>B_DIRECTORY_NODE</TT></B> (symlinks to directories are okay, as well).  If you only want directories (unusual, but possible), then leave <B><TT>B_FILE_NODE</TT></B> out of it.  
<P>
</UL>
<P>
If you're not convinced, read on:
<P>
<UL>
<LI>If the setting includes <B><TT>B_FILE_NODE</TT></B> and the user selects and confirms a file or a symlink to a file, the file (or symlink) is delivered to your target.   If it doesn't include <B><TT>B_FILE_NODE</TT></B> and the user selects a file (or symlink to a file), the Open button is disabled.
<P>
<LI>If the setting includes <B><TT>B_DIRECTORY_NODE</TT></B> and the user selects and Opens (i.e. clicks the Open button) a directory or a symlink to a directory, the directory (or symlink) is delivered to your target.  If it doesn't include <B><TT>B_DIRECTORY_NODE</TT></B> and the user Opens a directory (or symlink to a directory), the directory is entered (the contents of the directory are displayed in the file list).
<P>
<LI>If the setting includes <B><TT>B_SYMLINK_NODE</TT></B> and the user confirms a symlink, the symlink is delivered to your target.  If it doesn't include <B><TT>B_SYMLINK_NODE</TT></B> and the user selects symlink, the panel's response depends on the inclusion of the other two flavors.  Note that including <B><TT>B_SYMLINK_NODE</TT></B> is an odd thing to do&mdash;it only makes sense if it's not combined with either of the other two flavors, and even then it doesn't make much sense.
<P>
</UL>
<P>
As implied by the here, when the user confirms a symlink (regardless of the flavor setting), you always receive the <I>symlink itself </I>in the Open message&mdash;you don't get the file or directory it points to.
<P>
<H4>
<A NAME="Multiple%20Selection"></A>Multiple Selection
</H4>
<P>
<B><TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../The%20Support%20Kit/misc.html#bool">bool</A></TT></B> <I><FONT  color=991122 face=HELVETICA>allow_multiple_selection</I></FONT></TD>
<TD><B><TT>true</TT></B></TD>
<TD>none</TD>
</TABLE>
<P>
This parameter determines whether the user is allowed to select more than one item at a time.  Save panels should set this to <B><TT>false</TT></B>. 
<P>
<H4>
<A NAME="Notification%20Message"></A>Notification Message
</H4>
<P>
<B><TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> </TT></B><I><FONT  color=991122 face=HELVETICA>*message</I></FONT></TD>
<TD>a default <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A></TD>
<TD><B><TT><A HREF="#SetMessage()">SetMessage()</A></TD>
</TABLE></TT></B>
<P>
By default, the format of the message that's sent to your target when the user confirms or cancels is defined by the file panel (the default formats are defined later).  You can override the default by specifying your own BMessage.  The <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> is copied by the BFilePanel object. You can change this message using the <B><TT><A HREF="#SetMessage()">SetMessage()</A></TT></B> function.
<P>
<H4>
<A NAME="Ref%20Filter"></A>Ref Filter
</H4>
<P>
<B><TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="RefFilter.html#BRefFilter">BRefFilter</A> </TT></B><I><FONT  color=991122 face=HELVETICA>*filter</I></FONT></TD>
<TD><B><TT>NULL</TT></B></TD>
<TD><B><TT><A HREF="#SetRefFilter()">SetRefFilter()</A></TD>
</TABLE></TT></B>
<P>
When panel directory changes (this includes when the panel is constructed, and when the panel's <B><TT><A HREF="#Refresh()">Refresh()</A></TT></B> function is called), or when a new entry is added to the existing directory, the new entries are passed, one-by-one, to the panel's <A HREF="RefFilter.html#BRefFilter">BRefFilter</A> object through a <A HREF="RefFilter.html#BRefFilter">BRefFilter</A> hook function.  In your implementation of the hook function, you can reject individual entries; rejected entries won't be displayed in the file list.
<P>
By default, a file panel has no BRefFilter.  To supply one, you have to subclass <A HREF="RefFilter.html#BRefFilter">BRefFilter</A> (in order to implement the hook function) and pass it in.
<P>
<UL>
<LI>Note that the ref filter isn't asked to "re-review" the entry list when the file panel is <B><TT><A HREF="#Show()">Show()</A></TT></B>'d after being hidden.
<P>
</UL>
<P>
<H4>
<A NAME="Is%20Modal?"></A>Is Modal?
</H4>
<P>
<B><TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../The%20Support%20Kit/misc.html#bool">bool</A> </TT></B><I><FONT  color=991122 face=HELVETICA>modal</I></FONT></TD>
<TD><B><TT>false</TT></B></TD>
<TD>none</TD>
</TABLE>
<P>
A modal file panel can't be closed; to get rid of the panel, the user has to click a button.  By default, file panels are not modal.
<P>
<H4>
<A NAME="Hide%20When%20Done"></A>Hide When Done
</H4>
<P>
<B><TABLE BORDER cellpadding=4>
<TH></B>Argument</TH>
<TH>Default</TH>
<TH>Function</TH>
<TR>
<TD><B><TT><A HREF="../The%20Support%20Kit/misc.html#bool">bool</A> </TT></B><I><FONT  color=991122 face=HELVETICA>hide_when_done</I></FONT></TD>
<TD><B><TT>true</TT></B></TD>
<TD><B><TT><A HREF="#SetHideWhenDone()">SetHideWhenDone()</A></TD>
</TABLE></TT></B>
<P>
By default, a file panel is hidden when the user confirms or Cancels.  If you set <I><FONT  color=991122 face=HELVETICA>hide_when_done</I></FONT> to <B><TT>false</TT></B>, the panel remains on the screen.  Clicking the panel's close box always hides the panel
<P>
<A NAME="15231:%20head2:%20The%20Target%20and%20the%20Messages%20it%20Sees"></A>
<P>
<HR>
<H3>
<A NAME="The%20Target%20and%20the%20Messages%20it%20Sees"></A>The Target and the Messages it Sees
</H3>
<P>
When the user confirms a selection or cancels a file panel, a <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> is constructed and sent to the target of the BFilePanel object.  By default, the target is <B><TT><A HREF="../The%20Application%20Kit/Application.html#be_app_messenger">be_app_messenger</A></TT></B>.  You can specify a different target (as a BMessenger) through the BFilePanel constructor, or through the<B><TT> <A HREF="#SetTarget()">SetTarget()</A></TT></B> function.
<P>
The format of the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> that the target receives depends on whether the user is opening, saving, or canceling.
<P>
<H4>
<A NAME="Open%20Notification"></A>Open Notification
</H4>
<P>
If the target is <B><TT><A HREF="../The%20Application%20Kit/Application.html#be_app_messenger">be_app_messenger</A></TT></B> and the <B><TT>what</TT></B> field is <B><TT><A HREF="../Messages/GeneralMessages.html#B_REFS_RECEIVED">B_REFS_RECEIVED</A></TT></B>, the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> shows up in the <B><TT><A HREF="../The%20Application%20Kit/Application.html#RefsReceived()">RefsReceived()</A></TT></B> function.  Otherwise it's sent to the target's <B><TT><A HREF="../The%20Application%20Kit/Handler.html#MessageReceived()">MessageReceived()</A></TT></B>.
<P>
<UL>
<LI>By default, the <B><TT>what</TT></B> field is <B><TT><A HREF="../Messages/GeneralMessages.html#B_REFS_RECEIVED">B_REFS_RECEIVED</A></TT></B>.  You can override the default by supplying your own <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> (<B><TT><A HREF="#SetMessage()">SetMessage()</A></TT></B>).
<P>
<LI>The "refs" field (type <B><TT><A HREF="../The%20Support%20Kit/misc.html#B_REF_TYPE">B_REF_TYPE</A></TT></B>) contains <B><TT><A HREF="misc.html#entry_ref">entry_ref</A></TT></B> structures, one for each entry that the user has confirmed.
<P>
<LI>The message may contain other fields, as copied from the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> you (optionally) supplied.  The data in these fields won't be changed.
<P>
</UL>
<P>
Keep in mind that the refs that you receive through this message point to the literal entries that the user confirmed.  In other words, if the confirmed selection is a symlink to a file, you'll receive a ref for the symlink, not the file (and similarly for a link to a directory).  It's up to you to turn the symlink into a file (which is probably what you want).  
<P>
If you want a <A HREF="Entry.html#BEntry">BEntry</A> object, all you have to do is pass <B><TT>true</TT></B> as the traverse argument to BEntry's constructor or <B><TT><A HREF="File.html#SetTo()">SetTo()</A></TT></B>:
<P>
<PRE>&nbsp;&nbsp;&nbsp;/* We&gt;ll assume that 'ref' was just plucked from an open notification. */
&nbsp;&nbsp;&nbsp;BEntry entry(ref, true);</PRE>
<P>
You don't even have to check to see if the ref <I>is</I> a symlink.  
<P>
If you want to turn a symlink ref into a ref to the pointed-to file, just add this line:
<P>
<PRE>&nbsp;&nbsp;&nbsp;entry.GetRef(&amp;ref);</PRE>
<P>
<H4>
<A NAME="Save%20Notification"></A>Save Notification
</H4>
<P>
Save notifications are always sent to the target's <B><TT><A HREF="../The%20Application%20Kit/Handler.html#MessageReceived()">MessageReceived()</A></TT></B> function.
<P>
<UL>
<LI>By default, the <B><TT>what</TT></B> field is <B><TT><A HREF="../Messages/FilePanelMessages.html#B_SAVE_REQUESTED">B_SAVE_REQUESTED</A></TT></B>.  You can override the default by supplying your own <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> (<B><TT><A HREF="#SetMessage()">SetMessage()</A></TT></B>).
<P>
<LI>The "directory" field (type <B><TT><A HREF="../The%20Support%20Kit/misc.html#B_REF_TYPE">B_REF_TYPE</A></TT></B>) contain a single <B><TT><A HREF="misc.html#entry_ref">entry_ref</A></TT></B> structure that points to the directory in which the user has requested the entry be saved (in other words, the ref refers to the panel directory).
<P>
<LI>The "name" field (<B><TT><A HREF="../The%20Support%20Kit/misc.html#B_STRING_TYPE">B_STRING_TYPE</A></TT></B>) is the text the user typed in the Save Panel's text view.
<P>
<LI>The message may contain other fields, as copied from the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> you (optionally) supplied.  The data in these fields won't be changed.
<P>
</UL>
<P>
Note that if the user confirms a name that collides with an existing file, an alert is automatically displayed.  The user can then back out of the confirmation and return to the Save Panel, or clobber the existing file.  The save notification is sent after (and only if) the user agrees to clobber the file.
<P>
<TABLE  CELLPADDING=4>
	<TR>
		<TD>&nbsp;
		<TD>
			<HR NOSHADE>
			<TABLE CELLPADDING=4>
				<TR>
					<TD VALIGN=TOP>
						<IMG SRC="../art/infoBullet.gif">
					<TD><FONT FACE="helvetica">
The file <I>isn't</I> clobbered by the system; it's up to you (as the receiver of the save notification) to do the dirty work.
<P>
						</FONT>			
			</TABLE>
			<HR NOSHADE>
</TABLE>

<P>
<H4>
<A NAME="Cancel%20Notification"></A>Cancel Notification
</H4>
<P>
A cancel notification is sent <I>whenever</I> the file panel is hidden.  This includes the Cancel button being clicked, the panel being closed, and the panel being hidden after an open or a save (given that the panel is in hide-when-done mode).
<P>
Cancel notifications are always sent to the target's <B><TT><A HREF="../The%20Application%20Kit/Handler.html#MessageReceived()">MessageReceived()</A></TT></B> function.
<P>
<UL>
<LI>The <B><TT>what</TT></B> field is always <B><TT><A HREF="../Messages/FilePanelMessages.html#B_CANCEL">B_CANCEL</A></TT></B>, even if you supplied your own BMessage.
<P>
<LI>The "old_what" field (<B><TT><A HREF="../The%20Support%20Kit/misc.html#B_UINT32_TYPE">B_UINT32_TYPE</A></TT></B>) records the "previous" <B><TT>what</TT></B> value.  This is only useful (and dependable) if you supplied your own BMessage:  The <B><TT>what</TT></B> from your message is moved to the "old_what" field.  If you didn't supply a <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A>, you should ignore this field (it could contain garbage).
<P>
<LI>The "source" (<B><TT><A HREF="../The%20Support%20Kit/misc.html#B_POINTER_TYPE">B_POINTER_TYPE</A></TT></B>) is a pointer to the BFilePanel object that was closed.
<P>
<LI>The message may contain other fields, as copied from the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> you (optionally) supplied.  The data in these fields won't be changed.
<P>
</UL>
<P>
Keep in mind that when a file panel is closed&mdash;regardless of how it's closed&mdash;the BFilePanel object is <I>not</I> destroyed.  It's merely hidden.
<P>
<A NAME="28149:%20head2:%20Modifying%20the%20Look%20of%20the%20File%20Panel"></A>
<P>
<HR>
<H3>
<A NAME="Modifying%20the%20Look%20of%20the%20File%20Panel"></A>Modifying the Look of the File Panel
</H3>
<P>
There are two ways you can modify the look of your BFilePanel object.  
<P>
<UL>
<LI>You can do some simple text twiddling by calling the label- and text-setting functions <B><TT><A HREF="#SetButtonLabel()">SetButtonLabel()</A></TT></B> and <B><TT><A HREF="#SetSaveText()">SetSaveText()</A></TT></B>.
<P>
<LI>If you need to <I>really</I> change the look, you can get a handle on the panel's <A HREF="../The%20Interface%20Kit/Window.html#BWindow">BWindow</A> and <A HREF="../Release%20Notes/InterfaceKit.html#BView">BView</A> objects in order to move them around, add your own, or whatever. You get the window through the <B><TT><A HREF="#Window()">Window()</A></TT></B> function.  Finding specific views within the window is described below.
<P>
</UL>
<P>
<H4>
<A NAME="Finding%20Views%20in%20the%20Panel"></A>Finding Views in the Panel
</H4>
<P>
The views in the panel are (mostly) named, as listed and shown below
<P>
<UL>
<LI>"MenuBar" is the window's menu bar.
<P>
<LI>"DirMenuField" is the path popup.
<P>
<LI>"TitleView" is the bar that holds the attribute titles.
<P>
<LI>"PoseView" is the scrollable list of files.
<P>
<LI>"VScrollBar" and "HScrollBar" are the vertical and horizontal scroll bars.
<P>
<LI>"CountVw" is the item counter to the left of the horizontal scroll bar.
<P>
<LI>"text view" is where the user types a file name (Save Panel only).
<P>
<LI>"default button" is the <B><U>Save</B></U> or <B><U>Open</B></U> button.
<P>
<LI>"cancel button" is the <B><U>Cancel</B></U> button.
<P>
</UL>
<P>
<IMG SRC="art/FilePanel2.gif" ALIGN="bottom">
<P>
The background view doesn't have a name, but it's always the first in the window's list of views:
<P>
<PRE>&nbsp;&nbsp;&nbsp;BView *background = filepanel->Window()->ChildAt(0);</PRE>
<P>
The other views can be found by name, reckoning off of the background view.  For example, here we get the "PoseView" view (the view that contains the file list):
<P>
<PRE>&nbsp;&nbsp;&nbsp;BView *files = background->FindView("PoseView");</PRE>
<P>
<HR>
<H3>
<A NAME="The%20C%20Functions"></A>The C Functions
</H3>
<P>
You can also display Open and Save Panels through the global C functions <B><TT>run_open_panel()</TT></B> and <B><TT>run_save_panel()</TT></B> (which are declared in <B>FilePanel.h</B>).  The functions create BFilePanel objects using the default constructor settings (modulo the <B><TT>file_panel_mode</TT></B>, of course).
<P>
The C functions create a new file panel each time they're called, and delete the panel when the user is finished with it.
<P>
<HR>
<H2>
<A NAME="Hook%20Functions"></A><FONT SIZE=6>H</FONT>ook <FONT SIZE=6>F</FONT>unctions
</H2>
<P>
<B><TT><A HREF="#SelectionChanged()">SelectionChanged()</A></TT></B>&nbsp;&nbsp;&nbsp;
<br>
Invoked whenever the user changes the set of selected entries.
<P>
<B><TT><A HREF="#WasHidden()">WasHidden()</A></TT></B>&nbsp;&nbsp;&nbsp;
<br>
Invoked just after the file panel is hidden because of the user's actions (it's not invoked if you call <B><TT><A HREF="#Hide()">Hide()</A></TT></B> yourself).
<P>
<HR>
<H2>
<A NAME="Constructor%20and%20Destructor"></A><FONT SIZE=6>C</FONT>onstructor and <FONT SIZE=6>D</FONT>estructor
</H2>
<P>
<HR>
<H3>
<A NAME="BFilePanel()"></A>BFilePanel()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
<B><TT><FONT  color=000022 size=+1>BFilePanel(file_panel_mode</TT></B></FONT> <I><FONT  color=991122 face=HELVETICA>mode</I></FONT> <FONT  face=HELVETICA>= B_OPEN_PANEL</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger*</A> <I><FONT  color=991122 face=HELVETICA>target</I></FONT> <FONT  face=HELVETICA>= NULL</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B><TT><A HREF="misc.html#entry_ref">entry_ref</A></TT></B> *<I><FONT  color=991122 face=HELVETICA>panel_directory</I></FONT> <FONT  face=HELVETICA>= NULL</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint32 <I><FONT  color=991122 face=HELVETICA>node_flavors</I></FONT> <FONT  face=HELVETICA>= 0</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool <I><FONT  color=991122 face=HELVETICA>allow_multiple_selection</I></FONT> <FONT  face=HELVETICA>= true</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> *<I><FONT  color=991122 face=HELVETICA>message</I></FONT> <FONT  face=HELVETICA>= NULL</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="RefFilter.html#BRefFilter">BRefFilter</A> *<I><FONT  color=991122 face=HELVETICA>filter</I></FONT> <FONT  face=HELVETICA>= NULL</FONT>,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool <I><FONT  color=991122 face=HELVETICA>modal</I></FONT> <FONT  face=HELVETICA>= false,
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</FONT>bool <I><FONT  color=991122 face=HELVETICA>hide_when_done</I></FONT> <FONT  face=HELVETICA>= true</FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
The constructor creates a new BFilePanel object and initializes it according to the arguments.  The panel isn't displayed until you invoke<B><TT> <A HREF="#Show()">Show()</A></TT></B>.  The arguments are thoroughly described in "<a href="#Constructing%20and%20Fine-tuning%20the%20Panel">Constructing and Fine-tuning the Panel</a>."
<P>
<TABLE  CELLPADDING=4>
	<TR>
		<TD>&nbsp;
		<TD>
			<HR NOSHADE>
			<TABLE CELLPADDING=4>
				<TR>
					<TD VALIGN=TOP>
						<IMG SRC="../art/infoBullet.gif">
					<TD><FONT FACE="helvetica">
You may notice that some of the default arguments shown here don't jibe with the defaults listed in the section <a href="#Constructing%20and%20Fine-tuning%20the%20Panel">"Constructing and Fine-tuning the Panel"</a>.  In particular, the <I><FONT  color=991122 face=HELVETICA>node_flavors</I></FONT> argument was described as defaulting to <B><TT>B_FILE_NODE</TT></B>, but is shown here as 0.  The "Constructing..." descriptions are correct:  The default values shown here are caught and converted by the BFilePanel constructor.
<P>
						</FONT>			
			</TABLE>
			<HR NOSHADE>
</TABLE>

<P>
<HR>
<H3>
<A NAME="~BFilePanel()"></A>~BFilePanel()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
virtual ~<B><TT><FONT  color=000022 size=+1><A HREF="#BFilePanel()">BFilePanel()</A>
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
Destroys the BFilePanel.  The object's target and <A HREF="RefFilter.html#BRefFilter">BRefFilter</A> are not touched by this destruction.  If the object is currently displaying a file panel, the panel is closed.
<P>
<HR>
<H2>
<A NAME="Member%20Functions"></A><FONT SIZE=6>M</FONT>ember <FONT SIZE=6>F</FONT>unctions
</H2>
<P>
<HR>
<H3>
<A NAME="GetNextSelectedRef()"></A>GetNextSelectedRef()
, 
<A NAME="Rewind()"></A>Rewind()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
status_t <B><TT><FONT  color=000022 size=+1>GetNextSelectedRef(</TT></B></FONT>entry_ref *<I><FONT  color=991122 face=HELVETICA>ref</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>Rewind(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
<B><TT>GetNextSelectedRef()</TT></B> initializes its arguments to point to the "next" ref in the file panel's set of currently selected items.  The function returns <B><TT><A HREF="../The%20Support%20Kit/ErrorCodes.html#B_ENTRY_NOT_FOUND">B_ENTRY_NOT_FOUND</A></TT></B> when it reaches the end of the list.  <B><TT>Rewind()</TT></B> gets you back to the top of the list.
<P>
Although you can call these functions anytime you want, they're intended to be used in implementations of the <B><TT><A HREF="#SelectionChanged()">SelectionChanged()</A></TT></B> hook function.  
<P>
<HR>
<H3>GetPanelDirectory()   see  <A HREF="#SetPanelDirectory()">SetPanelDirectory()</A></H3>
<P>
<HR>
<H3>Hide()   see  <A HREF="#Show()">Show()</A></H3>
<P>
<HR>
<H3>HidesWhenDone()   see  <A HREF="#SetHideWhenDone()">SetHideWhenDone()</A></H3>
<P>
<HR>
<H3>IsShowing()   see  <A HREF="#Show()">Show()</A></H3>
<P>
<HR>
<H3>Messenger()   see  <A HREF="#SetTarget()">SetTarget()</A></H3>
<P>
<HR>
<H3>
<A NAME="PanelMode()"></A>PanelMode()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
file_panel_mode <B><TT><FONT  color=000022 size=+1>PanelMode(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>

</TABLE></TABLE>

<P>
Returns the object's mode, either <B><TT>B_OPEN_PANEL</TT></B> or <B><TT>B_SAVE_PANEL</TT></B>.  The mode is set in the constructor and can't be changed thereafter.
<P>
<HR>
<H3>RefFilter()   see  <A HREF="#SetRefFilter()">SetRefFilter()</A></H3>
<P>
<HR>
<H3>
<A NAME="Refresh()"></A>Refresh()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>Refresh(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
<B><TT><A HREF="#Refresh()">Refresh()</A></TT></B> tells the file panel to re-read the contents of the panel directory, which causes the directory's entries to be re-run through the ref filter.  
<P>
You don't have to call <B><TT><A HREF="#Refresh()">Refresh()</A></TT></B> in order to keep the panel in sync with the directory's contents&mdash;the directory and file panel are kept in sync automatically.
<P>
<HR>
<H3>Rewind()   see  <A HREF="#GetNextSelectedRef()">GetNextSelectedRef()</A></H3>
<P>
<HR>
<H3>
<A NAME="SelectionChanged()"></A>SelectionChanged()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
virtual void <B><TT><FONT  color=000022 size=+1>SelectionChanged(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
This hook function is invoked whenever the user changes the set of selected files.  Within your implementation of this function, you iterate over <B><TT><A HREF="#GetNextSelectedRef()">GetNextSelectedRef()</A></TT></B> to retrieve refs to the currently selected files. 
<P>
<HR>
<H3>
<A NAME="SendMessage()"></A>SendMessage()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
virtual void <B><TT><FONT  color=000022 size=+1>SendMessage(</TT></B></FONT>const <A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A> *<I><FONT  color=991122 face=HELVETICA>messenger</I></FONT>, <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> *<I><FONT  color=991122 face=HELVETICA>message</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
Sends <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A> <I><FONT  color=991122 face=HELVETICA>message</I></FONT> to the <A HREF="../The%20Application%20Kit/Handler.html#BHandler">BHandler</A> targeted by <I><FONT  color=991122 face=HELVETICA>messenger</I></FONT>.
<P>
<B>See also:  <TT><A HREF="../The%20Application%20Kit/Messenger.html#SendMessage()">BMessenger::SendMessage()</A>
<P>
</TT></B><HR>
<H3>
<A NAME="SetButtonLabel()"></A>SetButtonLabel()
, 
<A NAME="SetSaveText()"></A>SetSaveText()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetButtonLabel(</TT></B></FONT>file_panel_button <I><FONT  color=991122 face=HELVETICA>which_button</I></FONT>, const char *<I><FONT  color=991122 face=HELVETICA>label</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetSaveText(</TT></B></FONT>const char *<I><FONT  color=991122 face=HELVETICA>text</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
<B><TT>SetButtonLabel()</TT></B> lets you set the label that's displayed in the panel's buttons.  The button that a specific invocation affects depends on the value of <B><TT>which_button</TT></B>:
<P>
<UL>
<LI><B><TT>B_DEFAULT_BUTTON</TT></B> is the Open button for an Open Panel and the Save button for a Save Panel.
<P>
<LI><B><TT>B_CANCEL_BUTTON</TT></B> is the "Cancel" button.
<P>
</UL>
<P>
<B><TT>SetSaveText()</TT></B> sets the text that's displayed in the Save Panel's text view (the area in which the user types and confirms a file name).
<P>
<HR>
<H3>
<A NAME="SetHideWhenDone()"></A>SetHideWhenDone()
, 
<A NAME="HidesWhenDone()"></A>HidesWhenDone()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetHideWhenDone</TT></B></FONT>(bool <I><FONT  color=991122 face=HELVETICA>hide_when_done</I></FONT>)
<P>


<TR><TD>
bool <B><TT><FONT  color=000022 size=+1>HidesWhenDone</TT></B></FONT>(void) const
<P>

</TABLE></TABLE>

<P>
By default, a file panel is hidden when the user confirms or Cancels.  You can control this behavior using the <B><TT><A HREF="#SetHideWhenDone()">SetHideWhenDone()</A></TT></B> function.  If you set <I><FONT  color=991122 face=HELVETICA>hide_when_done</I></FONT> to <B><TT>false</TT></B>, the panel remains on the screen; if you specify <B><TT>true</TT></B>, the panel hides when the user confirms or Cancels.  Clicking the panel's close box always hides the panel.
<P>
<B><TT><A HREF="#HidesWhenDone()">HidesWhenDone()</A></TT></B> returns the current setting of this option: <B><TT>true</TT></B> if the panel hides when the user is done with it or <B><TT>false</TT></B> if it remains on the screen.
<P>
<HR>
<H3>
<A NAME="SetMessage()"></A>SetMessage()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetMessage</TT></B></FONT>(BMessage *<I><FONT  color=991122 face=HELVETICA>msg</I></FONT>)
<P>

</TABLE></TABLE>

<P>
<B><TT><A HREF="#SetMessage()">SetMessage()</A></TT></B> allows you to set the format of the file panel's notification messages.  The message can also be set through the constructor.  See "<a href="#The%20Target%20and%20the%20Messages%20it%20Sees">The Target and the Messages it Sees</a>" for more information.
<P>
A copy is made of the <A HREF="../Release%20Notes/AppKit.html#BMessage">BMessage</A>, so it is your responsibility to delete <I><FONT  color=991122 face=HELVETICA>msg</I></FONT> when you no longer need it.
<P>
<HR>
<H3>
<A NAME="SetPanelDirectory()"></A>SetPanelDirectory()
, 
<A NAME="GetPanelDirectory()"></A>GetPanelDirectory()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetPanelDirectory(</TT></B></FONT><A HREF="Entry.html#BEntry">BEntry</A> *<I><FONT  color=991122 face=HELVETICA>dirEntry</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetPanelDirectory(</TT></B></FONT><A HREF="Directory.html#BDirectory">BDirectory</A> *<I><FONT  color=991122 face=HELVETICA>dirObj</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetPanelDirectory(</TT></B></FONT>entry_ref *<I><FONT  color=991122 face=HELVETICA>dirRef</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetPanelDirectory(</TT></B></FONT>const char *<I><FONT  color=991122 face=HELVETICA>dirStr</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>GetPanelDirectory(</TT></B></FONT>entry_ref *<I><FONT  color=991122 face=HELVETICA>ref</I></FONT><B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>

</TABLE></TABLE>

<P>
The <B><TT><A HREF="#SetPanelDirectory()">SetPanelDirectory()</A></TT></B> function sets the panel's "panel directory."  This is the directory whose contents are displayed in the panel's file list.  You can also set the panel directory through the constructor.  If you don't supply a directory, the current working directory is used.
<P>
<B><TT><A HREF="#GetPanelDirectory()">GetPanelDirectory()</A></TT></B> initializes <I><FONT  color=991122 face=HELVETICA>ref</I></FONT> to point to the current panel directory.  The argument must be allocated.
<P>
<HR>
<H3>
<A NAME="SetRefFilter()"></A>SetRefFilter()
, 
<A NAME="RefFilter()"></A>RefFilter()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetRefFilter(</TT></B></FONT><A HREF="RefFilter.html#BRefFilter">BRefFilter</A> *<I><FONT  color=991122 face=HELVETICA>filter</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
<A HREF="RefFilter.html#BRefFilter">BRefFilter</A> *<B><TT><FONT  color=000022 size=+1>RefFilter(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>

</TABLE></TABLE>

<P>
Whenever the file panel's panel directory is changed or refreshed (<B><TT><A HREF="#Refresh()">Refresh()</A></TT></B>), or when a new entry is added to the current panel directory, the "new" entries are run through the panel's "ref filter."  The <A HREF="RefFilter.html#BRefFilter">BRefFilter</A> class defines a single boolean hook function called <B><TT><A HREF="RefFilter.html#Filter()">Filter()</A></TT></B>.  The function receives the entries, one-by-one, and can reject specific entries (because they're the wrong file type, for example).  Rejected entries are not shown in the panel's file list.
<P>
The <B><TT>SetRefFilter()</TT></B> function sets the panel's ref filter.  You can also set it through the constructor.  Ownership of the filter is <I><FONT  color=991122 face=HELVETICA>not</I></FONT> handed to the panel.  You mustn't delete the ref filter while the panel is still extant.
<P>
<B><TT><A HREF="#RefFilter()">RefFilter()</A></TT></B> returns a pointer to the panel's ref filter.
<P>
<HR>
<H3>SetSaveText()   see  <A HREF="#SetButtonLabel()">SetButtonLabel()</A></H3>
<P>
<HR>
<H3>
<A NAME="SetTarget()"></A>SetTarget()
, 
<A NAME="Messenger()"></A>Messenger()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>SetTarget(</TT></B></FONT><A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A> <I><FONT  color=991122 face=HELVETICA>bellhop</I></FONT><B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
<A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A> <B><TT><FONT  color=000022 size=+1>Messenger(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>

</TABLE></TABLE>

<P>
<B><TT>SetTarget()</TT></B> sets the target of the file panel's notification messages.  The target can also be set through the constructor.  If you don't set a target, <B><TT><A HREF="../The%20Application%20Kit/Application.html#be_app_messenger">be_app_messenger</A></TT></B> is used.  See the <A HREF="../The%20Application%20Kit/Invoker.html#BInvoker">BInvoker</A> class (in the Application Kit) for an explanation of how a <A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A> can be used as a target.
<P>
A copy is made of the <A HREF="../The%20Application%20Kit/Messenger.html#BMessenger">BMessenger</A>, so it is your responsibility to delete <I><FONT  color=991122 face=HELVETICA>bellhop</I></FONT> when you no longer need it.
<P>
<B><TT><A HREF="#Messenger()">Messenger()</A></TT></B> returns (a copy of) the messenger that's used as the file panel's target.
<P>
<HR>
<H3>
<A NAME="Show()"></A>Show()
, 
<A NAME="Hide()"></A>Hide()
, 
<A NAME="IsShowing()"></A>IsShowing()
, 
<A NAME="WasHidden()"></A>WasHidden()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
void <B><TT><FONT  color=000022 size=+1>Show(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
void <B><TT><FONT  color=000022 size=+1>Hide(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
<TR><TD>
bool <B><TT><FONT  color=000022 size=+1>IsShowing(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>


<TR><TD>
virtual void <B><TT><FONT  color=000022 size=+1>WasHidden(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)
<P>
</TT></B></FONT>
</TABLE></TABLE>

<P>
These functions show and hide the file panel, and tell if you the panel is currently showing.  
<P>
<B><TT>WasHidden()</TT></B> is a hook function that's invoked whenever the user's actions causes the file panel to be hidden.  If you call <B><TT><A HREF="#Hide()">Hide()</A></TT></B> yourself, <B><TT><A HREF="#WasHidden()">WasHidden()</A> </TT></B>is <I>not</I> invoked. 
<P>
<HR>
<H3>WasHidden()   see  <A HREF="#Show()">Show()</A></H3>
<P>
<HR>
<H3>
<A NAME="Window()"></A>Window()
</H3>
<P>

<Table>
<TR> 
<TD>&nbsp;&nbsp;
<TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<TR> 
<TD>&nbsp;&nbsp;
<TD><p><Table cellpadding =3 bgcolor =eeeeee> 

<TR><TD>
<A HREF="../The%20Interface%20Kit/Window.html#BWindow">BWindow</A> *<B><TT><FONT  color=000022 size=+1>Window(</TT></B></FONT>void<B><TT><FONT  color=000022 size=+1>)</TT></B></FONT> const
<P>

</TABLE></TABLE>

<P>
Returns a pointer to the file panel's window.  If you want to mess around with the window's views, see "<a href="#Modifying%20the%20Look%20of%20the%20File%20Panel">Modifying the Look of the File Panel</a>."
<P>
</PRE></TABLE></UL></MENU></B></I></TT>



<!--TOP LINKS-->
<HR>
<center>
<TABLE bgcolor=ddeeee>
<TR><TD>
<A HREF="index.html"><FONT face=HELVETICA>The Storage Kit Table of Contents</FONT></A>&nbsp;&nbsp;
<TD>
&nbsp;&nbsp;<A HREF="The%20Storage%20Kit%20Master%20Index.html"><FONT face=HELVETICA>The Storage Kit Index</FONT></A>
</TABLE></center>
<!--TOP LINKS-->


<!-- Footer for Release 5 HTML Be Book -->
<hr>
<br>
<p>
<center>
<i><FONT size=6>T</FONT>he <FONT size=6 color=blue>B</FONT><FONT size=6 color=red>e</font> <FONT size=6>B</FONT>ook</i>,
<br>...in lovely HTML...
<br>for BeOS Release 5.
<center>
<br>
<p><font face=helvetiva>Copyright &copy; 2000 Be, Inc.  All rights reserved..
</body>
</html>

